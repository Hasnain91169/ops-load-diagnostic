<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Operations Load Diagnostic</title>
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <main class="app-shell">
    <header class="hero">
      <span class="pill">Read-only Diagnostic</span>
      <h1>Operations Load Diagnostic</h1>
      <p>Upload a CSV or text batch of inbound communications, generate a static diagnostic snapshot, and export a client-ready PDF report.</p>
    </header>

    <section class="panel">
      <h2>Input</h2>
      <div class="form-grid">
        <label>
          Input mode
          <select id="inputMode">
            <option value="csv">CSV upload</option>
            <option value="text">Plain text batch upload</option>
          </select>
        </label>
        <label>
          Lookback days
          <input id="lookbackDays" type="number" min="1" max="30" value="14" />
        </label>
        <label>
          Max items
          <input id="maxItems" type="number" min="10" max="300" value="200" />
        </label>
      </div>

      <label class="file-label">
        Upload file
        <input id="fileInput" type="file" accept=".csv,.txt" />
      </label>

      <label>
        Optional plain text paste (used if no file selected)
        <textarea id="textInput" rows="6" placeholder="Paste text batch here. Use --- between messages."></textarea>
      </label>

      <div class="actions">
        <button id="generateBtn" type="button">Generate Diagnostic</button>
        <button id="sampleBtn" type="button" class="secondary">Load Sample CSV</button>
        <button id="pdfBtn" type="button" class="secondary" disabled>Download PDF Report</button>
      </div>
      <p id="status" class="status"></p>
    </section>

    <section class="panel hidden" id="reportPanel">
      <h2>Diagnostic Report</h2>
      <div id="reportRoot"></div>
    </section>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jspdf-autotable@3.8.2/dist/jspdf.plugin.autotable.min.js"></script>
  <script src="./app.js" defer></script>
</body>
</html>
